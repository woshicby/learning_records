# 第一章 计算机网络体系结构

重点：网络的分层结构（5层和7层）、ISO/OSI参考模型各层的功能及相关协议、接口、服务的概念、网络的性能指标（时延、带宽、速率、吞吐量）

## 1.1计算机网络概述

计算机网络：一些互联的、自治的计算机系统的集合

### 1.1.1概念

广义观点：只要是能实现远程信息处理的系统或能进一步达到资源共享的系统，都是计算机网络（计算机网络发展的低级阶段）

资源共享观点：以能够相互共享资源的方式互联起来的自治计算机系统的集合（包含①目的：资源共享②组成单元：多台独立自治计算机③遵循统一规则：网络协议）（符合目前计算机网络的基本特征）

用户透明性观点：存在一个能为用户自动管理资源的网络操作系统，能调用用户所需的资源，对用户透明。（描述了一个分布式系统，是网络发展的目标）

### 1.1.2 组成

#### 1.1.2.1 组成成分看：硬件、软件、协议三大部分

硬件：主机、通信链路、交换设备、通信处理机组成

软件：实现资源共享的软件、方便用户使用的工具软件

协议：计算机网络的核心，规定了网络传输数据是所遵循的规范

#### 1.1.2.2 工作方式看：边缘部分、核心部分

边缘部分：所有连接到因特网上、供用户直接使用的主机，用于进行通信和资源共享

核心部分：大量的网络和连接这些网络的路由器组成，为边缘部分提供连接性和交换服务

#### 1.1.2.3 功能组成：通信子网、资源子网

通信子网：传输介质、通信设备、网络协议组成，使网络有数据传输、交换、控制、存储的能力

资源子网：实现资源共享功能的设备及其软件的集合，提供共享其他计算机上的硬件、软件、数据资源的服务。

### 1.1.3 功能

数据通信：最基本最重要，实现信息传输，将端系统联系起来

资源共享：软件、数据、硬件的共享，提高软件、硬件、数据资源的利用率

分布式处理：某个计算机系统负荷过重是把其处理的复杂任务分配给网络中的其他计算机系统，利用空闲计算机资源提高系统利用率

提高可靠性：各台计算机可以通过网络互为替代

负载均衡：将工作任务均衡地分配给各台计算机

### 1.1.4 分类

#### 1.1.4.1 按分布范围分类

广域网/远程网（WAN）：提供长距离通信，覆盖范围几十千米到几千千米，是因特网的核心部分

城域网（MAN）：覆盖范围几个街区到整个城市，5~50km，多用以太网技术

局域网（LAN）：一般用微机或工作站通过高速线路向量，覆盖范围小，几十米到几千米，传统使用广播技术，广域网使用交换技术

个人区域网（PAN）：个人工作地点将消费电子设备用无线技术连接起来的网络，覆盖区域直径约10m

#### 1.1.4.2 按传输技术分类

广播式网络：所有联网计算机都共享同一个公共通信信道。接收到分组的计算机通过检查目的地址决定是否接受。（局域网基本采用广播式通信技术，广域网中的无线、卫星通信网络也采用广播式通信技术）

点对点网络：每条物理线路连接一堆计算机。如果没有直接相连，就要通过中间节点的接收、存储、转发直至目的节点

#### 1.1.4.3 按拓扑结构分类

网络拓扑结构：网中结点与通信线路之间的几何关系表示的网络结构

| 名称       | 具体描述                                                   | 优点                             | 缺点                                         |
| ---------- | ---------------------------------------------------------- | -------------------------------- | -------------------------------------------- |
| 总线形网络 | 单根传输线把计算机连接起来                                 | 建网容易、增减结点方便、节省线路 | 重负载时通信效率不高、总线任意一处对故障敏感 |
| 星形网络   | 每个终端或计算机都以单独的线路与中央设备相连               | 便于集中控制和管理               | 成本高、中心结点对故障敏感                   |
| 环形网络   | 所有计算机接口设备连接成一个环（典型例子：令牌环网局域网） |                                  |                                              |
| 网状形网络 | 一般情况下，每个结点至少有两条路径和其他结点相连           | 可靠性高                         | 控制复杂、线路成本高                         |

#### 1.1.4.4 按使用者分类

公用网（Public Network）：所有愿意按电信公司的规定交纳费用的人都可以使用这种网络。

专用网（Private Network）：某个部门为满足本单位特殊业务的需要而建设的网络。

#### 1.1.4.5 按交换技术分类

电路交换网络：在源结点和目的结点之间建立一条专用的通路用于传送数据。

报文交换网络（存储-转发网络）：重复存储转发过程发送报文到目的结点的网络。

#### 1.1.4.6 按传输介质分类

有线网络：双绞线网络、同轴电缆网络等

无线网络：蓝牙、微博、无线电

### 1.1.5 计算机网络的标准化工作及相关组织

RFC(Request For Comments)的四个阶段：因特网草案（Internet Draft）、建议标准（Proposed Standard）、草案标准（Draft Standard）、因特网标准（Internet Standard）

此外还有实验的RFC和提供信息的RFC

国际标准化组织（ISO）：OSI参考模型、HDLC

国际电信联盟（ITU）：前身为国际电话电报咨询委员会（CCITT）下属机构ITU-T

国际电气电子工程师协会（IEEE）：IEEE.802标准

### 1.1.6 计算机网络的性能指标

带宽（Bandwidth）：本来表示通信线路允许通过的信号频带范围，计网中表示网络的通信线路所能传输数据的能力，等价于“最高数据率”

时延（Delay）：数据（一个报文或分组）从网络（或链路）的一端传送到另一端所需要的总时间

| 名称     | 定义                                                       | 计算公式or具体操作                                           |
| -------- | ---------------------------------------------------------- | ------------------------------------------------------------ |
| 发送时延 | 结点将分组的所有比特推向（传输）链路所需的时间             | 分组长度/信道宽度（最高数据率）                              |
| 传播时延 | 电磁波在信道中传播一定的距离需要花费的时间                 | 信道长度/电磁波在信道上的传播速率                            |
| 处理时延 | 数据在交换结点为存储转发而进行的一些必要的处理所花费的时间 | 分析分组的首部、从分组中提取数据部分、进行差错检验、查找适当的路由 |
| 排队时延 | 分组在队列中排队所花费的时间                               | 进入路由器后要先在输入队列中排队等待处理，确定转发端口后要在输出队列中排队等待转发 |

总时延=发送时延+传播时延+处理时延+排队时延（若无说明，排队时延和处理时延一般忽略不计）

时延带宽积：发送端发送的第一个比特到达终点时，发送方已经发出了多少个比特（时延带宽积=发送时延×信道带宽（最高数据率））

往返时延（Round-Trip Time，RTT）：从发送端发送数据开始，到发送端收到来自接收端的确认（假设接收端立即确认），总共经历的时延

吞吐量（Throughput）单位时间内通过某个网络/信道/接口的数据量，收到网络带宽或网络额定速率的限制。

速率/数据率/比特率（Speed）：；连接到计算机网络上的主机在数字信道上传送数据的速率

信道利用率：某一信道有百分之多少的时间是有数据通过的（信道利用率=有数据通过时间/（有+无）数据通过时间）

## 1.2 计算机网络体系结构与参考模型

网络的体系结构（Architecture）：计算机网络的各层及其协议的集合

### 1.2.1 计算机网络的分层结构

分层的基本原则：①每层都实现一种相对独立的功能，降低大系统的复杂度②各层之间界面自然清晰，易于理解，相互交流尽可能少③各层功能的精确定义独立于具体的实现方法，可以采用最合适的技术来实现④保持下层对上层的独立性，上层单向使用下层提供的服务⑤整个分层结构应能促进标准化工作

服务数据单元（SDU）：为完成用户所要求的功能而应传送的数据

协议控制信息（PCI）：控制协议操作的信息

协议数据单元（PDU）：对等层次之间传送的数据单元（链路层PDU：帧，网络层PDU：分组，传输层PDU：报文）

### 1.2.2 计算机网络协议、接口、服务的概念

协议：规则的集合，由语法、语义和同步三部分组成

语法：规定了传输数据的格式

语义：规定了所要完成的功能

同步：规定了执行各种操作的条件和时序关系

接口：同一结点内相邻两层间交换信息的连接点

服务：下层为紧邻的上层提供的功能调用，服务是通过服务访问点（Service Access Point，SAP）提供给上层使用的，SAP是一种逻辑接口

服务按三种方式分类：
| 分类标准                 | 面向连接服务/可靠服务/有应答服务       | 无连接服务/不可靠服务/无应答服务                   |
| ------------------------ | -------------------------------------- | -------------------------------------------------- |
| 面向连接服务和无连接服务 | 有连接建立、数据传输和连接释放三个阶段 | 需要发送数据时可以直接发送，不保证通信的可靠性     |
| 可靠服务和不可靠服务     | 网络具有纠错、检错、应答机制           | 尽量准确、可靠地传送，不能保证数据正确、可靠地传送 |
| 有应答服务和无应答服务   | 接收方收到数据后向发送方给出响应的应答 | 接收方收到数据后不自动给出应答，若需要则由上层实现 |

服务原语：上层使用下层所提供的服务是必须与下层交换的一些命令

OSI将原语划分为四类：

请求（Request）：由服务用户发往服务提供者，请求完成某项工作

指示（Indication）：由服务提供者发往服务用户，指示用户做某件事情

响应（Response）：由服务用户发往服务提供者，作为对指示的响应

证实（Confirmation）：由服务提供者发往服务用户，作为对请求的证实

### 1.2.3 ISO/OSI参考模型和TCP/IP模型

#### 1.2.3.1 OSI参考模型

开放系统互联参考模型（OSI/RM）简称OSI参考模型

有7层：物理层、数据链路层、网络层、传输层、会话层、表示层、应用层

低三层为通信子网，高三层为资源子网，传输层承上启下

| 名称                          | 传输单位                         | 任务                                               | 功能                                                         | 定义内容                                                     | 接口标准/协议                           |
| ----------------------------- | -------------------------------- | -------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | --------------------------------------- |
| 物理层（Physical Layer）      | 比特                             | 透明的传输比特流                                   | 在物理媒体上为数据端设备透明地传输原始比特流                 | 数据终端设备（DTE）和数据通信设备（DCE）的物理和逻辑连接方法 | EIA-232C、EIA/TIA RS-449、CCITT的X.21等 |
| 数据链路层（Data Link Layer） | 帧                               | 将网络层传来的IP数据报组装成帧                     | 成帧、差错控制、流量控制、传输管理                           |                                                              | SDLC、HDLC、PPP、STP、帧中继            |
| 网络层（Network Layer）       | 数据报                           | 把网络层的协议数据分组从源端传到目的端             | 路由选择、流量控制、拥塞控制、差错控制、网际互联             |                                                              | IP、IPX、ICMP、IGMP、ARP、RARP、OSPF等  |
| 传输层（Transport Layer）     | 报文段（TCP）、用户数据报（UDP） | 负责主机中两个进程的通信                           | 为端到端连接提供可靠的传输服务，提供流量控制、差错控制、服务质量、数据传输管理等服务 |                                                              | TCP、UDP                                |
| 会话层（Session Layer）       |                                  | 利用传输层提供的端到端的服务，向表示层提供增值服务 | 管理主机间的会话过程，包括建立、管理、终止进程间的会话。使用校验点回复通信，实现数据同步 |                                                              |                                         |
| 表示层（Presentation Layer）  |                                  | 处理两个通信系统中交换信息的表示方式               | 用抽象的标准方法定义数据结构，采用标准的编码形式。提供数据压缩、解压、加密来对数据表示进行变换 |                                                              |                                         |
| 应用层（Application Layer）   |                                  | 为特定类型的网络应用提供访问OSI环境的手段          |                                                              |                                                              | FTP、SMTP、HTTP等                       |

#### 1.2.3.2 TCP/IP模型

包括网络接口层、网际层、传输层、应用层

网络接口层：从主机或结点接收IP分组，并把它们发送到指定的物理网络上

网际层：将分组发往任何网络，并为之选择独立的路由，不保证有序到达

传输层：使得发送端和目的地端主机上的对等实体进行会话

传输控制协议（Transmission Control Protocol，TCP）：面向连接，数据传输的单位是报文段，能提供可靠的交付

用户报文段协议（User Datagram Protocol，UDP）：无连接的，数据传输的单位是用户数据报，不提供可靠的交付

应用层：包含所有高层协议

#### 1.2.3.3 TCP/IP模型与OSI参考模型的比较

相似：
①都采取分层的体系结构
②都是基于独立的协议栈
③都可以解决异构网络的互联

差别：
①OSI精确地定义了三个主要概念：服务、协议、接口，TCP/IP模型在这三个概念上没有区分
②OSI模型没有偏向于任何特定协议，通用性良好，TCP/IP模型不适合于非TCP/IP的协议栈
③TCP/IP模型设计之初就考虑了多种异构网的互联问题，OSI只考虑了一种标准的公用数据网
④OSI在网络层支持无连接和面向连接的通信，传输层仅有面向连接的通信，TCP/IP认为可靠性是端到端的问题，网际层只有无连接的通信，传输层支持无连接和面向连接两种方式。
