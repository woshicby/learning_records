# 第一章 概述

## 1.1 计算机网络在信息时代的作用

21世纪的重要特征：数字化、网络化、信息化

三类熟悉的网络：电报网络、有线电视网络、计算机网络

互联网：指Internet，是由数量极大的计算机网络互联起来的，覆盖全球的

局部范围互连的计算机网络，称之为互连网（差一个字）

互联网两个重要基本特点：连通性、资源共享

## 1.2 互联网概述

计算机网络（简称网络）：由若干节点（node，又说结点没人用了）和连接这些节点的链路（link组成）

互连网（internet）：有多个网络通过一些路由器相互连接起来，构成了范围更大的计算机网络，叫做互连网/网络的网络

主机：与网络相连的计算机

### 1.2.2 互联网基础结果发展的三个阶段

第一阶段：从单个网络ARPANET向互联网发展的过程：

1969年，美国防部创建了第一个分组交换网ARPANET

20世纪70年代中期，人们开始研究多种网络互连的技术，导致了互连网络的出现，成为互联网的雏形

1983年，TCP/IP协议成为ARPANET上的标准协议，使得所有使用TCP/IP协议的计算机都能利用互联网相互通信

1983年，作为互连网的诞生时间

1990年，ARPANET正式宣布关闭

internal指互连网：泛指由多个计算机网络互相连接而成的计算机网络

Internet指互联网：当前全球最大的、开放的、由众多网络相互连接而成的特定互连网，采用TCP/IP协议族、前身为ARPANET

第二阶段：构成了三级结构的互联网

1985年起：美国国家科学基金会（National Science Foundation，NSF）围绕六个大型计算机中心建设计算机网络，即国家科学基金网NSFNET

NSFNET：三级计算机网络，分为主干网、地区网、校园网/企业网

1991年，互联网的通信量急剧增大，主干网交给私人公司经营，并开始收费

1992年，互联网上的主机超过100万台

1993年，主干网速率提高到45Mbit/s（T3速率）

第三阶段：全球范围的多层次ISP结构的互联网

主干ISP：由专门的公司创建和维护，服务面积最大（一般都能覆盖国家范围），且拥有高速主干网（10Gbit/s或更高）不同网络运营商的主干ISP网络可以互通

地区ISP：一些较小的ISP，通过一个或多个主干ISP连接起来，位于第二层，数据率也小一些

本地ISP：给用户提供直接的服务

互联网交换点IXP：允许两个网络直接相连并交换分组，而不需要再通过第三个网络来转发分组，减少延时，降低转发费用

内容提供者专门网络：不向用户提供互联网转接服务，而是提供视频内容的服务

2005年，用户数超10亿

2010年，用户数超20亿

2014年，用户数超30亿

2019年3月，用户数超43.8亿

### 1.2.3 互联网的标准化工作

1992年成立互联网协会（Internet Society，ISOC）：对互联网进行全面管理以及在世界范围内促进其发展和使用

互联网体系结果委员会（Internet Architecture Board，IAB）：ISOC下属，负责管理互联网有关协议的开发

互联网工程部（Internet Engineering Task Force，IETF）：IAB下属，针对协议的开发和标准化，由互联网工程指导小组（Internet Engineering Steering Group，IESG）管理

互联网研究部（Internet Research Task Force，IRTF）：IAB下属，针对需要长期考虑的问题，包括互联网的一些协议、应用、体系结构等，由互联网研究指导小组（Internet Research Steering Group，IRSG）管理

RFC的编号是按发表时间先后编的，陈旧或被更新的RFC会有新的编号

制定互联网的正式标准要经过三个阶段

互联网草案：有效期只有六个月，不算RFC文档

建议标准：从这个阶段开始成为RFC文档

互联网标准：经过长期的考验，证明了可以成为互联网标准时，分配一个标准编号，记为STDxxxx，一个互联网标准可以和多个RFC文档关联

原本是建议标准→草案标准→互联网标准，2011年10月删除了草案标准阶段

另外三种RFC文档：历史的（已经被新的替代，或未能成为互联网标准）、实验的（其工作处于正在实验的情况，而不能在实用的互联网服务中实现）、提供信息的（包括与互联网有关的一般的、历史的或指导的信息）

索引文件：REC INDEX，不断更新中，大编号（新文档）排在前

## 1.3 互联网的组成

工作方式上，可分为：

边缘部分：由所有连接在互联网上的主机组成，是用户直接使用的

核心部分：由大量网络和连接这些网络的路由器组成，为边缘部分提供服务

### 1.3.1 互联网的边缘部分

可以是服务器，也可以是手机等小的端系统，可以属于个人，也可以属于ISP

端系统之间的通信方式：C/S方式、P2P方式

#### 1.3.1.1 客户-服务器方式

客户：服务请求方、服务器：服务提供方

客户程序不需要特殊的硬件和复杂的操作系统，必须知道服务器程序的地址

服务器程序专门用来提供服务，可同时处理多个客户的请求，一直不断运行，被动接收请求，不需要知道客户的笛子，一般有强大的硬件和高级的操作系统

通信是双线的，客户和服务器都可以发送和接收数据

### 1.3.2 互联网的核心部分

路由器（router）：一种专用计算机，是实现分组交换（packet switching）的关键构件，任务是转发收到的分组

#### 1.3.2.1 电路交换

交换（switching）：按照某种方式动态地分配传输线路的资源

电路交换：必须经过建立连接→通话→释放连接三个步骤的交换方式

特点：在通话的全部时间内，始终占用端到端的通信资源

缺点：线路的传输效率往往很低，因为数据往往是突发式的出现的，真正用来传输数据的时间往往不到10%甚至1%

#### 1.3.2.2 分组交换

采用存储转发技术

报文（message）：通常把要发送的整块数据称为一个报文

分组（packet）：报文划分为小的等长数据端，加上必要的控制信息组成的头部/包头（header）后构成分组/包

主机为用户进行信息处理，路由器用来转发分组，即进行分组交换（存储→检查首部→查找转发表→从合适接口转发，此外还要更新转发表）

分组交换的优点：高效（传输过程中动态分配带宽，对通信链路逐段占用）、灵活（为每一个分组独立选择最合适的转发路由）、迅速（以分组作为传输单位，不先建立连接就能发送分组）、可靠（保证可靠性的网络协议：分布式多路由的分组交换网，使网络又很好的生存性）

三种交换方式的主要特点：

电路交换：整个报文的比特流连续地从源点直达终点，好像在一个管道中传送

报文交换：整个报文先传送到相邻节点，全部存储下来后查找转发表，转发到下一个节点

分组交换：单个分组传送到相邻接点，存储下来后查找转发表，转发到下一个节点

连续传送大量的数据，则电路交换传输速率较快，报文交换和分组交换不需要预先分配传输带宽，可提高网络的信道利用率。

分组交换比报文交换的时延小，具有更好的灵活性

## 1.4 计算机网络在我国的发展

1980年，铁道部开始计算机联网实验

1989年11月，我国第一个公用分组交换网CNPAC建成运行

20实际80年代，国内许多单位相继安装了大量的局域网

1994年4月20日，我国用64kbit/s专线正式接入互联网

1994年5月，中国科学院高能物理研究所设立了我国第一个万维网服务器

1994年9月，中国公用计算机互联网CHINANET正式启动

中国规模最大的公用计算机网络：中国电信CHINANET、中国联通UNINET、中国移动CMNET、中国教育和科研CERNET、中国科学技术CSTNET

2004年2月，我国第一个下一代互联网CNGI的主干网CERNET2试验网正式开通并提供服务，以2.5-10Gbit/s的速率连接北上广，并与国际下一代互联网连接

1996搜狐、1997网易、1998新浪、1999腾讯、2011微信、2000百度、1999阿里巴巴、2003淘宝、2004支付宝

整一个卷起来了。

## 1.5 计算机网络的类别

计算机网络：主要是由一些通用的、可编程的硬件互联而成的，并非专门用于实现某一特定目的，能够用于传输不同类型数据，并能支持广泛的和日益增长的应用。

### 1.5.2 几种不同类别的计算机网络

按作用范围分类

广域网/远程网（WAN）：提供长距离通信，覆盖范围几十千米到几千千米，是因特网的核心部分

城域网（MAN）：覆盖范围几个街区到整个城市，5~50km，多用以太网技术

局域网（LAN）：一般用微机或工作站通过高速线路向量，覆盖范围小，几十米到几千米，传统使用广播技术，广域网使用交换技术

个人区域网（PAN）：个人工作地点将消费电子设备用无线技术连接起来的网络，覆盖区域直径约10m

按使用者分类

公用网（Public Network）：所有愿意按电信公司的规定交纳费用的人都可以使用这种网络。

专用网（Private Network）：某个部门为满足本单位特殊业务的需要而建设的网络。

接入网（Access Network，AN）：用来把用户接入到互联网的网络，又称为本地接入网、居民接入网

## 1.6 计算机网络的性能

### 1.6.1 性能指标

带宽（Bandwidth）：本来表示通信线路允许通过的信号频带范围，计网中表示网络的通信线路所能传输数据的能力，等价于“最高数据率”

时延（Delay）：数据（一个报文或分组）从网络（或链路）的一端传送到另一端所需要的总时间

| 名称     | 定义                                                       | 计算公式or具体操作                                           |
| -------- | ---------------------------------------------------------- | ------------------------------------------------------------ |
| 发送时延 | 结点将分组的所有比特推向（传输）链路所需的时间             | 分组长度/信道宽度（最高数据率）                              |
| 传播时延 | 电磁波在信道中传播一定的距离需要花费的时间                 | 信道长度/电磁波在信道上的传播速率                            |
| 处理时延 | 数据在交换结点为存储转发而进行的一些必要的处理所花费的时间 | 分析分组的首部、从分组中提取数据部分、进行差错检验、查找适当的路由 |
| 排队时延 | 分组在队列中排队所花费的时间                               | 进入路由器后要先在输入队列中排队等待处理，确定转发端口后要在输出队列中排队等待转发 |

总时延=发送时延+传播时延+处理时延+排队时延（若无说明，排队时延和处理时延一般忽略不计）

时延带宽积：发送端发送的第一个比特到达终点时，发送方已经发出了多少个比特（时延带宽积=发送时延×信道带宽（最高数据率））

往返时延（Round-Trip Time，RTT）：从发送端发送数据开始，到发送端收到来自接收端的确认（假设接收端立即确认），总共经历的时延

吞吐量（Throughput）单位时间内通过某个网络/信道/接口的数据量，收到网络带宽或网络额定速率的限制。

速率/数据率/比特率（Speed）：；连接到计算机网络上的主机在数字信道上传送数据的速率

信道利用率：某一信道有百分之多少的时间是有数据通过的（信道利用率=有数据通过时间/（有+无）数据通过时间）

### 1.6.2 非性能指标

费用：包括设计和实现的费用，一般来说，速率越高，价格越高

质量：取决于所有构件的质量和构件如何组成网络。质量影响可靠性、管理的建议性、性能。高质量的网络玩玩也比较贵

标准化：可以使用通用的国际标准，也可以遵循特定的专用标准，使用国际标准可以得到更好的互操作性，易于升级换代和维修，易于得到技术支持

可靠性：与网络的质量和性能有关，高速网络要可靠的运行往往比较难/贵

可拓展性和可升级性：构造时就应当考虑今后扩展（规模扩大）和升级（性能和版本的提高），性能越好，扩展费用和难度往往也高

便于管理和维护：没有良好的管理和维护，就很难达到和保持所设计的性能

## 1.7 计算机网络体系结构

分层：把庞大而复杂的问题转化为若干较小的局部问题，从而变得易于研究和处理

1974年，美国IBM公司宣布了系统网络体系结构（System Network Architecture，SNA）之后开始出现各种不同的体系结构

1977年，国际标准化组织ISO开始研究开放系统互联基本参考模型（Open System Interconnection Reference Model，OSI/RM）

1983年，形成了OSI/RM的正式文件（ISO 7498）

OSI失败原因：①OSI的专家缺乏实际经验、完成OSI标准时缺乏商业驱动力②OSI协议实现起来过分复杂，运行效率低③制定周期太长，按OSI标准生产的设备无法及时进入市场④层次划分不太合理，有些功能在多个层次中重复出现

Ps.后来许多标准都是ISO和国际电报电话咨询委员会（CCITT）联合制定的

### 1.7.2 协议与划分层次

网络协议：为进行网络中的数据交换而建立的规则、标准或约定，需要规定所交换数据的格式以及有关的同步问题

网络协议的三要素：

语法：数据和控制信息的结构和格式

语义：发出何种控制信息，完成何种动作以及做出何种响应

同步：事件实现顺序的详细说明

协议的两种形式：便于人来阅读和理解的文字描述、让计算机能够理解的程序代码

分层的好处：①各层之间相互独立②灵活性好③结构上可以分隔开④易于实现和维护⑤促进标准化工作

分层的缺点：有些功能会在不同层次中重复出现，因而产生额外开销

各层要完成的功能：①差错控制②流量控制③分段和重装④复用和分用⑤连接建立和释放

网络的体系结构：计算机网络各层及其协议的集合/计算机网络及其构件所应完成的功能的精确定义

实现（implementation）：功能究竟用何种硬件或软件完成

体系结构是抽象的，实现是具体的，是真正在运行的计算机硬件和软件

### 1.7.3 五层协议的体系结构

| 名称                                 | 传输单位                         | 任务                                                 | 功能                                         | 定义内容                                           | 接口标准/协议          |
| ------------------------------------ | -------------------------------- | ---------------------------------------------------- | -------------------------------------------- | -------------------------------------------------- | ---------------------- |
| 物理层（Physical Layer）             | 比特                             | 透明的传输比特流                                     | 在物理媒体（并不属于物理层协议）中传输比特流 | 用多大的电压代表“1”和“0”，连接电缆的针脚和连接方式 |                        |
| 数据链路层/链路层（Data Link Layer） | 帧                               | 将网络层传来的IP数据报组装成帧并发送帧               |                                              |                                                    |                        |
| 网络层/网际层/IP层（Network Layer）  | IP数据报/分组                    | 负责为分组交换网上的不同主机提供通信服务             | 在中每一个路由器上生成转发表、转发分组       |                                                    |                        |
| 运输层（Transport Layer）            | 报文段（TCP）、用户数据报（UDP） | 负责向两台主机中进程之间的通信提供通用的数据传输服务 | 复用和分用                                   |                                                    | TCP、UDP               |
| 应用层（Application Layer）          | 报文（message）                  | 通过应用程序之间的交互来完成特定网络功能             |                                              | 应用进程间通信和交互的规则                         | DNS、FTP、SMTP、HTTP等 |

### 1.7.4 实体、协议、服务、服务访问点

实体（entity）：任何可发送或接收信息的硬件或软件进程

协议：控制两个对等实体（或多个实体）进行通信的规则的集合。

在协议的控制下，两个对等实体间的通信使得本层能为上层提供服务。要实现本层协议，还需要使用下面一层提供的服务。

服务访问点（Service Access Point，SAP）：在同一系统中相邻两层的实体进行交互（交换信息）的地方

服务数据单元（Service Data Unit，SDU）：OSI把层与层之间交换的数据称为服务数据单元，一个SDU可以由多个PDU组成，一个PDU也可以由多个SDU组成。

服务用户：在服务提供者的上一层实体

### 1.7.5 TCP/IP的体系结构

只有四层：链路层（网络接口层）、网际层、运输层、应用层。

并不遵循严格的OSI分层概念，网络的核心部分越简单越好，一切复杂的部分让边缘部分去实现
